<!DOCTYPE html>
<html lang="en">
    <%- include('../head.ejs') %>
    <body>
        <header></header>
        <%- include('../menu.ejs') %>

        <main class="content-border">
            <%- include('../navigation.ejs') %>

            <div class="content">
                <div class="left">
                    <h2><%= i18n.player_profile.tribe_changes.header %></h2>
                    <table class="content-border">
                        <colgroup>
                            <col width="200px">
                            <col width="*">
                            <col width="*">
                        </colgroup>
                        <thead>
                            <tr>
                                <th><%= i18n.player_profile.tribe_changes.column_date_hour %></th>
                                <th><%= i18n.player_profile.tribe_changes.column_old_tribe %></th>
                                <th><%= i18n.player_profile.tribe_changes.column_new_tribe %></th>
                            </tr>
                        </thead>
                        <tbody>
                            <% if (tribeChanges.length) { -%>
                                <% for (let change of tribeChanges) { %>
                                    <tr>
                                        <td><%= formatDate(change.date, world.time_offset, 'hours-only') %></td>

                                        <% if (change.old_tribe) { -%>
                                            <td><a href="/stats/<%= marketId %>/<%= worldNumber %>/tribes/<%= change.old_tribe %>"><%= tribeTags[change.old_tribe] %></a></td>
                                        <% } else { -%>
                                            <td><%= i18n.player_profile.tribe_changes.none %></td>
                                        <% } -%>

                                        <% if (change.new_tribe) { -%>
                                            <td><a href="/stats/<%= marketId %>/<%= worldNumber %>/tribes/<%= change.new_tribe %>"><%= tribeTags[change.new_tribe] %></a></td>
                                        <% } else { -%>
                                            <td><%= i18n.player_profile.tribe_changes.none %></td>
                                        <% } -%>
                                    </tr>
                                <% } %>
                            <% } else { -%>
                                <tr>
                                    <td colspan="4"><%= i18n.player_profile.tribe_changes.no_tribe_changes %></td>
                                </tr>
                            <% } -%>
                        </tbody>
                    </table>
                </div>
            </div>
        </main>

        <%- include('../footer.ejs') %>

        <script sync type="text/javascript" src="/javascripts/libs/require.min.js"></script>
        <script defer type="text/javascript">define('backendValues', () => (<%- JSON.stringify(backendValues) %>))</script>
        <script defer type="text/javascript" src="/javascripts/stats.js"></script>
    </body>
</html>
